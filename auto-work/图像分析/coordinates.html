<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <title>coordinates</title>
    <style type="text/css" media="all">
    </style>
    
    

</head>
<body>


    <canvas id="myCanvas" width="600" height="600"
    style="border:1px solid #d3d3d3;">
    Your browser does not support the canvas element.
    </canvas>
    
    <textarea id="points" contenteditable="true" rows=20 cols=40>1 2
1 3</textarea>
    <button onclick="generate()">generate</button>
    <button id="test">test</button>
    <script>
    
        function generate(){
        	var s=document.getElementById("points").value.split("\n");
            var _x=[],_y=[];
            for(var i=0;i<s.length;i++){
            	_x.push(parseInt(s[i].trim().split(" ")[0])*30);
            	_y.push(parseInt(s[i].trim().split(" ")[1])*30);
            }
            lineTo(_x,_y);
        }
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        
        function lineTo(list_x,list_y){
        	if(list_x==undefined||list_x.length==0)
            	return;
        	ctx.fillStyle = 'white';
        	ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
        	ctx.moveTo(list_x[0],list_y[0]);
            for(var i=1;i<list_x.length;i++){
                if(isNaN(list_y[i])){
                    if(i+1>=list_x.length){
                        ctx.lineTo(list_x[0],list_y[0]);
                    }
                    // NaN --> NaN
                    if(!isNaN(list_x[i])){
                        console.log(list_x[i]/30,list_y[i]/30,list_x[i-1]/30)
                        i++;
                        ctx.moveTo(list_x[i]+list_x[i-1],list_y[i]);
                        ctx.arc(list_x[i],list_y[i],list_x[i-1],0,7) 
                    }else if(!isNaN(list_y[i+1])){
                        i++;
                        ctx.moveTo(list_x[i],list_y[i]);
                    }
                }else{
                	ctx.lineTo(list_x[i],list_y[i]);
                }
            }
        	ctx.stroke();
        }
        
        
        /*
            if(colunms>10){
                
            }
            \n
            ->
            a (\n|cols)
            (order) ()
            var evt = document.createEvent("KeyboardEvent");
            evt.type="keypress";       // typeArg,                                                           
            evt.       true,             // canBubbleArg,                                                        
                   true,             // cancelableArg,                                                       
                   null,             // viewArg,  Specifies UIEvent.view. This value may be null.     
                   false,            // ctrlKeyArg,                                                               
                   false,            // altKeyArg,                                                        
                   false,            // shiftKeyArg,                                                      
                   false,            // metaKeyArg,                                                       
                    9,               // keyCodeArg,                                                      
                    0);              // charCodeArg);
            evt.initKeyEvent ("keypress", true, true, window,
                            0, 0, 0, 0,
                            13, 13); 
            document.getElementById('points').dispatchEvent(test_key_event);
        */
        /*window.onload=start;
        function start(e){
            console.log(e.timeStamp)
        }*/
        /*document.getElementById("points").onchange=function(e){
            console.log("onchange")
        }
        var test_key_event;*/
        /*document.getElementById("points").onkeyup=function(e){
            var elem=e.target;
            
            //console.log(e,performance.timing);
            //console.log(elem.cols);            
        }*/
        /*document.getElementById("test").onclick=function(e){
           //console.log(e);
           document.getElementById('points').focus()
           test_key_event.timeStamp=e.timeStamp+200;
           
            document.getElementById('points').dispatchEvent(test_key_event);
        }
        var index_test=0;
        document.getElementById("points").onkeypress=function(e){
            test_key_event=e;
            console.log(e)
            console.log(index_test++);
        }*/
        /*document.getElementById("points").onkeydown=function(e){
            var elem=e.target;
            //console.log(elem.value);
            return;
            var keyCode=e.keyCode;
            if(keyCode>=33&&(keyCode<=40))
                return
            else 
                console.log(e);
            return 
            if(e.key==1)
            var elem=e.target;
            var rows=elem.rows
            if(e.key=="Enter"){
                rows++;
            }
            //rows-=elem.value.substring(elem.selectionStart,elem.selectionEnd).split("\n").length-1;
            
            if(rows>=2)
                elem.rows=rows;
            else{
                elem.rows=2;
            }
            return true;
        }*/
        
        
    </script>

</body>
</html>
